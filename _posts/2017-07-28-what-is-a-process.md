---
layout: post
title: "What is a process?"
date: 2017-07-28 23:51:03
author: "Wei SHEN"
categories: ["operating system"]
tags: ["process"]
description: >
---

### 什么是进程？
首先，进程（process）是一个 **正在顺序执行程序的实例**。讲到实例，**就不光有自身属性（程序本身逻辑流），而且还有一个当前状态（包括程序计数器，寄存器和变量等等）。**

用大白话说，
> 有个程序叫《水浒》。我看《水浒》这个过程，就是一个进程，就是《水浒》个程序当前的一个实例。看到《王婆贪贿说风情郓哥不忿闹茶肆》这一章，我觉得潘金莲这个人物我很喜欢。所以很想去看一下《金瓶梅》好好了解一下潘金莲。但我（主机）只有一双眼睛，同时只能看一本书。所以我要先放下《水浒》进程，去打开《金瓶梅》进程，这就叫进程的切换。但是放下《水浒》之前，为了等会儿回来能接着读，需要夹一张书签记住我看到二十三回，这就是进程的当前状态（上下文）。


每个进程都有自己完整的一套逻辑地址空间。进程a访问的`0xffff`和进程b方位的`0xffff`不是同一个物理地址。

关于一个进程的地址空间布局，参考下面这张图，
![c-memory-layout](/images/c-memory/c-memory-layout.gif)


除了一个祖先进程，其他所有进程都是由其他某个（它的父进程）已经存在的进程执行了一个用于创建进程的系统调用而创建的。关于几个比较特殊的进程，下面再细说。

在UNIX系统中，只有一个系统调用可以用来创建进程：**`fork`**。在调用了fork后，父进程和子进程拥有相同的存储映像，相同的环境字符串，和相同的的打开文件。

### 进程的状态
1. 运行态：该时刻进程实际占用CPU。
2. 就绪态：可运行，但因为其他程序正在运行而暂时停止。
3. 阻塞态：除非某种外部事件发生，否则进程不能运行。

三种状态间的转换示意图如下，
![process-three-status](/images/what-is-a-process/process-three-status.png)

这里面的内容很丰富，先记住这么个大概。

### 进程的终止
1. 正常退出。自愿的。
2. 错误退出。自愿的。比如：要编译的程序源文件不存在。
3. 程序中的严重错误。非自愿。比如：引用的内存不存在，用零做除数等。
4. 被其他程序杀死。当然非自愿。调用`kill`系统调用可以杀死某个进程。
